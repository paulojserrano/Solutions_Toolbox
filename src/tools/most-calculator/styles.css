body { font-family: 'Inter', sans-serif; }

/* --- Loop Styles --- */
.loop-container { 
    margin-left: 1rem; 
    margin-top: 0.5rem; 
    margin-bottom: 0.5rem; 
    border: 1px solid; 
    border-radius: 4px;
    position: relative; 
    background: white;
}

.loop-header { 
    font-size: 0.7rem; 
    font-weight: 700; 
    padding: 0.25rem 0.5rem; 
    text-transform: uppercase; 
    border-bottom: 1px solid; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
}

.struct-body {
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

/* Line Loop Theme (Blue) */
.loop-line { border-color: #93c5fd; background: #eff6ff; }
.loop-line > .loop-header { background: #dbeafe; border-color: #93c5fd; color: #1e40af; }

/* Grasp Loop Theme (Amber) */
.loop-grasp { border-color: #fcd34d; background: #fffbeb; }
.loop-grasp > .loop-header { background: #fef3c7; border-color: #fcd34d; color: #92400e; }

/* Unit Loop Theme (Green) */
.loop-unit { border-color: #86efac; background: #f0fdf4; }
.loop-unit > .loop-header { background: #dcfce7; border-color: #86efac; color: #166534; }

/* Structogram Container */
.structogram-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding-bottom: 2rem;
    min-height: 100px;
}

/* Step Card */
.struct-box {
    position: relative;
    background: #fff;
    border: 1px solid #94a3b8;
    border-radius: 4px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    transition: all 0.2s;
    cursor: grab;
}
.struct-box:active { cursor: grabbing; }

.struct-box.being-dragged {
    opacity: 0.4;
    border-style: dashed;
    background-color: #f1f5f9;
}

.struct-box.drag-over-before { border-top: 3px solid #3b82f6; margin-top: 0.25rem; }

/* Action Block */
.struct-action {
    display: flex;
    flex-direction: column;
    border-left: 4px solid #3b82f6;
    padding: 0.5rem;
    background: #fff;
}
.struct-action:hover { background-color: #f8fafc; }

.action-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.action-title-group {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.default-name-label {
    font-size: 0.65rem;
    color: #94a3b8;
    margin-top: 2px;
    font-style: italic;
}

/* Controls */
.bare-input {
    background: transparent;
    border: none;
    font-family: inherit;
    color: inherit;
    width: 100%;
    outline: none;
}
.bare-input:focus { text-decoration: underline; }

.tmu-badge {
    font-family: 'Space Mono', monospace;
    font-weight: 700;
    font-size: 0.7rem;
    color: #fff;
    background-color: #3b82f6;
    padding: 0.1rem 0.4rem;
    border-radius: 0.25rem;
    min-width: 3.5rem;
    text-align: center;
}
.tmu-badge.manual { background-color: #f59e0b; }
.tmu-badge.sec { background-color: #10b981; }

.param-grid { display: flex; gap: 0.25rem; align-items: flex-end; flex-wrap: wrap; }
.param-col { display: flex; flex-direction: column; align-items: center; width: 1.8rem; }
.param-label { font-size: 0.5rem; font-weight: 700; color: #94a3b8; text-transform: uppercase; }

.param-btn {
    width: 100%; text-align: center;
    font-family: 'Space Mono', monospace; font-size: 0.7rem; font-weight: 700;
    color: #334155; background: transparent; border: 1px solid transparent;
    cursor: pointer; padding: 2px 0; border-radius: 2px;
}
.param-btn:hover { background-color: #e2e8f0; }

.manual-tmu-input {
    width: 3rem; font-size: 0.7rem; font-family: 'Space Mono', monospace;
    padding: 2px; border: 1px solid #e2e8f0; border-radius: 2px;
    text-align: center; color: #d97706;
}

.icon-btn { color: #94a3b8; padding: 4px; border-radius: 4px; cursor: pointer; transition: all 0.2s; }
.icon-btn:hover { color: #3b82f6; background-color: #eff6ff; }
.icon-btn.delete:hover { color: #ef4444; background-color: #fee2e2; }

/* Model Badge */
.model-badge {
    font-size: 0.6rem; font-weight: 700; text-transform: uppercase; padding: 2px 4px; border-radius: 4px; 
    cursor: pointer; margin-right: 4px; border: 1px solid transparent;
}
.model-general { background-color: #eff6ff; color: #3b82f6; border-color: #bfdbfe; }
.model-controlled { background-color: #fdf2f8; color: #db2777; border-color: #fbcfe8; }
.model-tool { background-color: #f0fdf4; color: #16a34a; border-color: #bbf7d0; }

/* Modals */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.3); z-index: 50; display: none;
    justify-content: center; align-items: center;
}
.modal-overlay.active { display: flex; }
.modal-content {
    background: white; border-radius: 8px; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    width: 400px; max-height: 80vh; overflow-y: auto; padding: 1.5rem;
}

.param-option {
    padding: 8px 12px; cursor: pointer; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;
    font-size: 0.85rem; color: #334155;
}
.param-option:hover { background-color: #f1f5f9; color: #2563eb; }
.param-val { font-family: 'Space Mono', monospace; font-weight: 700; width: 24px; }
.param-desc { flex: 1; margin-left: 10px; }

.action-cat-title {
    font-size: 0.7rem; font-weight: 700; text-transform: uppercase; 
    color: #94a3b8; letter-spacing: 0.05em; margin-bottom: 0.5rem; margin-top: 1rem;
}
.action-cat-title:first-child { margin-top: 0; }

.action-option {
    display: flex; justify-content: space-between; align-items: center;
    padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 0.5rem; margin-bottom: 0.5rem;
    cursor: pointer; transition: all 0.1s;
}
.action-option:hover { border-color: #3b82f6; background-color: #f8fafc; }
.action-option-main { font-size: 0.85rem; font-weight: 600; color: #334155; }
.action-option-sub { font-size: 0.7rem; color: #94a3b8; margin-top: 2px; }
.action-option-code { 
    font-family: 'Space Mono', monospace; font-size: 0.7rem; font-weight: 700; 
    color: #64748b; background: #f1f5f9; padding: 2px 6px; border-radius: 4px;
}
.action-custom { border-style: dashed; border-color: #94a3b8; }
.action-custom:hover { border-color: #2563eb; background-color: #eff6ff; }

/* Freq Select Colors */
.freq-Order { color: #475569; background: #f8fafc; }
.freq-Line { color: #1e40af; background: #eff6ff; }
.freq-Grasp { color: #92400e; background: #fef3c7; }
.freq-Unit { color: #166534; background: #f0fdf4; }